[{"name":"server.R","content":"library(shiny)\r\nlibrary(processx)\r\n\r\n\r\nif (!requireNamespace(\"shinyjs\", quietly = TRUE))install.packages(\"shinyjs\")\r\nlibrary(shinyjs)\r\n\r\nprint <- getwd()\r\nprint(print)\r\nfunction(input, output, session) {\r\n  \r\n  observeEvent(input$linux, {\r\n    if (input$linux) {\r\n      updateCheckboxInput(session, \"windows\", value = FALSE)\r\n      updateCheckboxInput(session, \"mac\", value = FALSE)\r\n    }\r\n  })\r\n  \r\n  observeEvent(input$windows, {\r\n    if (input$windows) {\r\n      updateCheckboxInput(session, \"linux\", value = FALSE)\r\n      updateCheckboxInput(session, \"mac\", value = FALSE)\r\n    }\r\n  })\r\n  \r\n  observeEvent(input$mac, {\r\n    if (input$mac) {\r\n      updateCheckboxInput(session, \"linux\", value = FALSE)\r\n      updateCheckboxInput(session, \"windows\", value = FALSE)\r\n    }\r\n  })\r\n  \r\n  observeEvent(input$generate_list, {\r\n    output$text <- renderText(\"Working... Please Wait.\")\r\n    delay(50, {\r\n      if (input$windows) {\r\n        if (input$spc) {\r\n          req(input$msspc_interactions, input$msspc_preys, input$msspc_bait)\r\n          cmd_saint <- paste(\"../Windows/SAINTexpress-spc.exe\",\r\n                             input$msspc_interactions$datapath,\r\n                             input$msspc_preys$datapath,\r\n                             input$msspc_bait$datapath)\r\n          print(cmd_saint)\r\n          processx::run(cmd_saint)\r\n          file.rename(\"list.txt\", \"msspc_list.txt\")\r\n          output$msspc_download <- downloadHandler(\r\n            filename = function() { \"msspc_list.txt\" },\r\n            content = function(file) { file.copy(\"msspc_list.txt\", file) }\r\n          )\r\n        }\r\n        if (input$int) {\r\n          req(input$msint_interactions, input$msint_preys, input$msint_bait)\r\n          cmd_saint <- paste(\"../Windows/SAINTexpress-int.exe\",\r\n                             input$msint_interactions$datapath,\r\n                             input$msint_preys$datapath,\r\n                             input$msint_bait$datapath)\r\n          processx::run(cmd_saint)\r\n          file.rename(\"list.txt\", \"msint_list.txt\")\r\n          output$msint_download <- downloadHandler(\r\n            filename = function() { \"msint_list.txt\" },\r\n            content = function(file) { file.copy(\"msint_list.txt\", file) }\r\n          )\r\n        }\r\n        if (input$merge_spc_int) {\r\n          merge <- merge(\r\n            read.table(file = \"msspc_list.txt\", header = T, sep = \"\\t\", stringsAsFactors = F),\r\n            read.table(file = \"msint_list.txt\", header = T, sep = \"\\t\", stringsAsFactors = F),\r\n            by = c(\"Bait\", \"Prey\"), all = T\r\n          )\r\n          write.table(merge, \"merged_list.txt\", row.names = F, sep = \"\\t\", quote = F)\r\n          output$merged_download <- downloadHandler(\r\n            filename = function() { \"merged_list.txt\" },\r\n            content = function(file) { file.copy(\"merged_list.txt\", file) }\r\n          )\r\n        }\r\n        output$text <- renderText(\"Done.\")\r\n      }\r\n      if (input$linux) {\r\n        if (input$spc) {\r\n          req(input$msspc_interactions, input$msspc_preys, input$msspc_bait)\r\n          cmd_saint <- paste(\"../Linux/SAINTexpress-spc\",\r\n                             input$msspc_interactions$datapath,\r\n                             input$msspc_preys$datapath,\r\n                             input$msspc_bait$datapath)\r\n          \r\n          processx::run(cmd_saint)\r\n          file.rename(\"list.txt\", \"msspc_list.txt\")\r\n          output$msspc_download <- downloadHandler(\r\n            filename = function() { \"msspc_list.txt\" },\r\n            content = function(file) { file.copy(\"msspc_list.txt\", file) }\r\n          )\r\n        }\r\n        if (input$int) {\r\n          req(input$msint_interactions, input$msint_preys, input$msint_bait)\r\n          cmd_saint <- paste(\"../Linux/SAINTexpress-int\",\r\n                             input$msint_interactions$datapath,\r\n                             input$msint_preys$datapath,\r\n                             input$msint_bait$datapath)\r\n          processx::run(cmd_saint)\r\n          file.rename(\"list.txt\", \"msint_list.txt\")\r\n          output$msint_download <- downloadHandler(\r\n            filename = function() { \"msint_list.txt\" },\r\n            content = function(file) { file.copy(\"msint_list.txt\", file) }\r\n          )\r\n        }\r\n        if (input$merge_spc_int) {\r\n          merge <- merge(\r\n            read.table(file = \"msspc_list.txt\", header = T, sep = \"\\t\", stringsAsFactors = F),\r\n            read.table(file = \"msint_list.txt\", header = T, sep = \"\\t\", stringsAsFactors = F),\r\n            by = c(\"Bait\", \"Prey\"), all = T\r\n          )\r\n          write.table(merge, \"merged_list.txt\", row.names = F, sep = \"\\t\", quote = F)\r\n          output$merged_download <- downloadHandler(\r\n            filename = function() { \"merged_list.txt\" },\r\n            content = function(file) { file.copy(\"merged_list.txt\", file) }\r\n          )\r\n        }\r\n        output$text <- renderText(\"Done.\")\r\n      }\r\n      if (input$mac) {\r\n        if (input$spc) {\r\n          req(input$msspc_interactions, input$msspc_preys, input$msspc_bait)\r\n          cmd_saint <- paste(\"../Linux/SAINTexpress-spc\",\r\n                             input$msspc_interactions$datapath,\r\n                             input$msspc_preys$datapath,\r\n                             input$msspc_bait$datapath)\r\n          system(cmd_saint)\r\n          file.rename(\"list.txt\", \"msspc_list.txt\")\r\n          output$msspc_download <- downloadHandler(\r\n            filename = function() { \"msspc_list.txt\" },\r\n            content = function(file) { file.copy(\"msspc_list.txt\", file) }\r\n          )\r\n        }\r\n        if (input$int) {\r\n          req(input$msint_interactions, input$msint_preys, input$msint_bait)\r\n          cmd_saint <- paste(\"../Linux/SAINTexpress-int\",\r\n                             input$msint_interactions$datapath,\r\n                             input$msint_preys$datapath,\r\n                             input$msint_bait$datapath)\r\n          system(cmd_saint)\r\n          file.rename(\"list.txt\", \"msint_list.txt\")\r\n          output$msint_download <- downloadHandler(\r\n            filename = function() { \"msint_list.txt\" },\r\n            content = function(file) { file.copy(\"msint_list.txt\", file) }\r\n          )\r\n        }\r\n        if (input$merge_spc_int) {\r\n          merge <- merge(\r\n            read.table(file = \"msspc_list.txt\", header = T, sep = \"\\t\", stringsAsFactors = F),\r\n            read.table(file = \"msint_list.txt\", header = T, sep = \"\\t\", stringsAsFactors = F),\r\n            by = c(\"Bait\", \"Prey\"), all = T\r\n          )\r\n          write.table(merge, \"merged_list.txt\", row.names = F, sep = \"\\t\", quote = F)\r\n          output$merged_download <- downloadHandler(\r\n            filename = function() { \"merged_list.txt\" },\r\n            content = function(file) { file.copy(\"merged_list.txt\", file) }\r\n          )\r\n        }\r\n        output$text <- renderText(\"Done.\")\r\n      }\r\n      \r\n      output$download_buttons <- renderUI({\r\n        buttons <- tagList()\r\n        if (input$spc) buttons <- tagAppendChild(buttons, downloadButton(\"msspc_download\", \"Download msspc_list.txt\"))\r\n        if (input$int) buttons <- tagAppendChild(buttons, downloadButton(\"msint_download\", \"Download msint_list.txt\"))\r\n        if (input$merge_spc_int) buttons <- tagAppendChild(buttons, downloadButton(\"merged_download\", \"Download merged_list.txt\"))\r\n        buttons\r\n      })\r\n    })\r\n  })\r\n}","type":"text"},{"name":"ui.R","content":"library(shiny)\r\nlibrary(shinyjs)\r\n\r\n\r\nfluidPage(\r\n  titlePanel(\"SAINTexpress\"),\r\n  useShinyjs(),\r\n  sidebarLayout(\r\n    sidebarPanel(\r\n      width = 5,\r\n      HTML(\"<strong>What Operating System are you using?<\/strong>\"),\r\n      tags$div(\r\n        style = \"margin-bottom: 20px;\",\r\n        checkboxInput(\"linux\", \"Linux\", value = FALSE),\r\n        checkboxInput(\"windows\", \"Windows\", value = FALSE),\r\n        checkboxInput(\"mac\", \"Mac\", value = FALSE)\r\n      ),\r\n      HTML(\"<strong>SAINTexpress Method:<\/strong>\"),\r\n      checkboxInput(\"spc\", \"Spectral count\", value = TRUE),\r\n      checkboxInput(\"int\", \"Intensity\", value = FALSE),\r\n      conditionalPanel(\r\n        condition = \"input.int == true && input.spc == true\",\r\n        checkboxInput(\"merge_spc_int\", \"Merge msspc_list.txt and msint_list.txt?\", value = FALSE)\r\n      ),\r\n      actionButton(\"generate_list\", \"Start SAINTexpress\"),\r\n      textOutput(\"text\"),\r\n      uiOutput(\"download_buttons\")\r\n    ),\r\n    mainPanel(\r\n      width = 5,\r\n      conditionalPanel(\r\n        condition = \"input.spc == true\",\r\n        fileInput(\"msspc_interactions\", \"Input msspc_saint_interactions.txt\", accept = c(\"text/plain\", \".txt\")),\r\n        fileInput(\"msspc_preys\", \"Input msspc_saint_preys.txt\", accept = c(\"text/plain\", \".txt\")),\r\n        fileInput(\"msspc_bait\", \"Input msspc_saint_baits.txt\", accept = c(\"text/plain\", \".txt\"))\r\n      ),\r\n      conditionalPanel(\r\n        condition = \"input.int == true\",\r\n        fileInput(\"msint_interactions\", \"Input msint_saint_interactions.txt\", accept = c(\"text/plain\", \".txt\")),\r\n        fileInput(\"msint_preys\", \"Input msint_saint_preys.txt\", accept = c(\"text/plain\", \".txt\")),\r\n        fileInput(\"msint_bait\", \"Input msint_saint_baits.txt\", accept = c(\"text/plain\", \".txt\"))\r\n      )\r\n    )\r\n  )\r\n)","type":"text"}]
